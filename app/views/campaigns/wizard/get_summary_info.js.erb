// Append the images of selected bilbo
<% @selected_contents.each do |slug, contents| %>
  board_carousel = $("#carousel-<%=slug.to_s%>")[0]
  board_carousel.getElementsByClassName('carousel-inner')[0].innerHTML = ""
  $("#ads_count_<%=slug.to_s%>")[0].innerHTML = "<%=t('bilbos.ads')%>: <%=contents.count%>"
  <% contents.each_with_index do |content, index| %>
    // create a div to place the image, video or iframe
    var carousel_item = document.createElement('div')
    carousel_item.classList = "carousel-item"
    <% if index == 0 %>
      carousel_item.classList += " active"
    <% end %>
    <% if content.is_video? %>
      carousel_item.innerHTML = '<video src=<%=content.multimedia_url%> class="center-block d-block rounded" controls="false" controlslist="nodownload" autoplay="false" loop="true" muted="muted" style="max-width: 100%; max-height: 100%; top: 0; bottom: 0; object-fit: contain;"/>'
    <% elsif content.is_image? %>
      carousel_item.innerHTML = '<img src=<%=content.multimedia_url%> class="center-block d-block rounded" style="max-width: 100%; max-height: 100%; top: 0; bottom: 0; object-fit: contain;"/>'
    <% else %>
      carousel_item.innerHTML = '<iframe src=<%=content.url%>  class="center-block d-block" style="max-width: 100%; max-height: 100%; top: 0; bottom: 0; object-fit: contain;" scrolling="no"/>'
    <% end %>
    //append the content to the carousel
    board_carousel.getElementsByClassName('carousel-inner')[0].append(carousel_item)
  <% end %>
<% end %>

$("#modalSummary").remove();
$('body').append('<%= j render "campaigns/wizard/per_hour_summary"%>');
$('.accordion').accordion({
  heightStyle: 'content',
  icons: { "header": "ui-icon-arrowthick-1-se", "activeHeader": "ui-icon-minus" },
  collapsible: true,
  active: false
});
// Set background white when the element is active, and remove (set bg-gray) when its closed
$(".accordion").click(function() {
  [header, content] = $(this).children()
  content.classList.add("bg-white")
  if(header.classList.contains("ui-accordion-header-active")){
    header.classList.add("bg-white")
  } else {
    header.classList.remove("bg-white")
  }
})
make_summary_selected_hours(); // Fill ads schedule table
