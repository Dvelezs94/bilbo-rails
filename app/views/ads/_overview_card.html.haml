-if ad.processed? || current_page?(ads_path)
  %a.link-02.col-sm-6.col-md-6.col-lg-4.col-xl-3.mg-b-20.pd-0.card-ad-link{:href => "#{ad_path(ad)}", :id => "#{ad.id}"}
    .col-12{"data-placement" => "top", "data-toggle" => "tooltip", :title => "#{ad.description}"}
      .card.card-file
        .card-file-thumb.bg-white
          - if ad.multimedia.first
            -if (ActiveStorage::Filename.new(ad.multimedia.first.filename.to_s).extension_without_delimiter.include? "mp4") && ad.multimedia.first.metadata[:height] <= 1080
              = video_tag(url_from_media(ad.multimedia.first), class: "img-inherit", autoplay: false, loop: true, muted: 'muted')
            -elsif (ActiveStorage::Filename.new(ad.multimedia.first.filename.to_s).extension_without_delimiter.include? "avi") || ad.multimedia.first.metadata[:height] > 1080
              = image_tag "construction_video.webp", class: "img-inherit"
            -elsif get_image_size_from_metadata(ad.multimedia.first)[:height] <= 1080
              = image_tag ad.multimedia.first, class: "img-inherit"
            -else
              = image_tag "construction_video.webp", class: "img-inherit"
        .card-body
          %h6= ad.name
        .card-footer
          %span.d-sm-inline
            = t("campaign.active_campaigns")
            \:
          = ad.campaigns.active.size
