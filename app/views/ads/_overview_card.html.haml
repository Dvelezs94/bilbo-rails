-if ad.processed? || current_page?(ads_path)
  %a.link-02.col-sm-6.col-md-6.col-lg-4.col-xl-3.mg-b-20.pd-0.card-ad-link{:href => "#{ad_path(ad)}", :id => "#{ad.id}"}
    .col-12{"data-placement" => "top", "data-toggle" => "tooltip", :title => "#{ad.description}"}
      .card.card-file
        .card-file-thumb.bg-white
          - if ad.multimedia.first
            - meta = get_image_size_from_metadata(ad.multimedia.first)
            -if (ActiveStorage::Filename.new(ad.multimedia.first.filename.to_s).extension_without_delimiter.include? "mp4")
              = image_tag(url_from_media(ad.multimedia.first.preview(resize_to_limit: [600, 600]).processed), class: "img-inherit", autoplay: false, loop: true, muted: 'muted')
            -elsif meta[:height] <= 1080
              = image_tag url_from_media(ad.multimedia.first.variant(resize_to_limit: [600, 600]).processed), class: "img-inherit"
            -else
              = image_tag "construction_video.webp", class: "img-inherit"
          - else
            = image_tag image_path("placeholder_sm"), class: "img-inherit"
        .card-body
          %h6= ad.name
        .card-footer
          %span.d-sm-inline
            = t("campaign.active_campaigns")
            \:
          = ad.campaigns.active.size
          .d-none.ad-duration{:data => {duration: current_user.is_provider? ? ad.duration : ""}}
